
const DISTANCIA_CASA 10

const Blocked 0
const Running 1
const Finished 2

use digital-in sensor_distancia 1
use digital-in sensor_color_izq 2
use digital-in sensor_color_der 3
use digital-out motor_izq 4
use digital-out motor_der 5

hayCasa:
  read 1 //sensor_distancia
  push 10 //DISTANCIA_CASA
  binary_sub //DISTANCIA_CASA - sensor_distancia
  return

contarCasas:
  push_var 0 //contarCasas.cuenta
  push_var 1 //contarCasas.viendo
  push 0
  write_var 0 //contarCasas.cuenta
  push 0
  write_var 0 //contarCasas.viendo
loop:
  call hayCasa
  neg
  jump_zero loop_else
  push 0 //False
  write_var 1 // viendo = False
  jump loop_if_end
loop_else:
  push 1 //True
  write_var 1 // viendo = True
  push 0 //cuenta
  push 1
  binary_add //cuenta + 1
  write_var 0 //cuenta = cuenta + 1
loop_if_end:
  jmp loop

